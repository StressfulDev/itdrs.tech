import React, {FC, useEffect, useRef, useState} from "react";
import anime from "animejs/lib/anime.es";
import "./AnimatedTarget.css";
import {use} from "i18next";
import {set} from "animejs";

interface IAnimatedTargetProps {
  screenWidth: number;
}

const AnimatedTarget: FC<IAnimatedTargetProps> = ({screenWidth}) => {
  const ref = useRef<any>(null);
  const ref2 = useRef<any>(null);

  const [width, setWidth] = useState(900);
  const [height, setHeight] = useState(1200);
  const [indentLeft, setIndentLeft] = useState(100);

  ref.current = anime.timeline({
    // direction: "alternate",
    loop: true,
    autoplay: true,
    easing: "linear",
    duration: 6000,
  })
  ref2.current = anime.timeline({
    direction: "alternate",
    loop: true,
    autoplay: true,
    easing: "easeInOutSine",
    duration: 3000,
    offset: 0,
  });

  useEffect(() => {
    ref.current
        .add({
          targets: "#target",
          rotate: "360deg",
        }, 0.1);
    ref2.current.add({
      targets: "#arcone",
      d: [{value: "M71.0282 335.021C71.0282 291.132 79.6726 247.674 96.4681 207.126C113.264 166.578 137.881 129.735 168.915 98.7005C199.949 67.667 236.791 43.05 277.339 26.2541C317.887 9.45868 361.347 0.814117 405.235 0.814117C449.124 0.814117 492.582 9.45868 533.13 26.2541C573.678 43.05 610.521 67.6671 641.554 98.7014C672.588 129.735 697.206 166.578 714.001 207.126C730.797 247.674 739.441 291.132 739.441 335.021H655.376C655.376 302.172 648.905 269.644 636.335 239.296C623.764 208.948 605.338 181.372 582.111 158.144C558.883 134.916 531.308 116.492 500.96 103.921C470.611 91.3503 438.084 84.8803 405.235 84.8803C372.385 84.8803 339.858 91.3503 309.51 103.921C279.161 116.492 251.586 134.916 228.358 158.144C205.131 181.372 186.705 208.948 174.135 239.296C161.564 269.644 155.094 302.172 155.094 335.021H71.0282Z"},],
    }, 1)
        .add({
          targets: "#arcone",
          translateY: "-7.1rem",
        }, 1)
        .add({
          targets: "#arctwo",
          d: [{value: "M174.597 335.021C174.597 304.733 180.562 274.741 192.153 246.759C203.743 218.777 220.732 193.351 242.149 171.934C263.566 150.517 288.991 133.528 316.974 121.938C344.956 110.347 374.948 104.381 405.236 104.381C435.524 104.381 465.515 110.347 493.498 121.938C521.481 133.528 546.906 150.517 568.323 171.934C589.74 193.351 606.729 218.777 618.319 246.759C629.91 274.741 635.876 304.733 635.876 335.021H552.979C552.979 315.619 549.158 296.407 541.733 278.482C534.308 260.557 523.426 244.269 509.706 230.55C495.987 216.831 479.7 205.949 461.775 198.524C443.85 191.099 424.638 187.277 405.236 187.277C385.834 187.277 366.622 191.099 348.697 198.524C330.772 205.949 314.485 216.831 300.765 230.55C287.046 244.269 276.164 260.557 268.739 278.482C261.314 296.407 257.493 315.619 257.493 335.021H174.597Z"},],
        }, 1)
        .add({
          targets: "#arctwo",
          translateY: "-7.1rem",
        }, 1)
        .add({
          targets: "#arcthree",
          d: [{value: "M684.42 350.303C684.42 386.967 677.199 423.271 663.168 457.143C649.138 491.016 628.574 521.792 602.649 547.717C576.725 573.642 545.947 594.207 512.075 608.237C478.203 622.268 441.899 629.489 405.237 629.489C368.573 629.489 332.27 622.268 298.398 608.237C264.526 594.207 233.749 573.642 207.824 547.717C181.899 521.792 161.335 491.016 147.305 457.143C133.274 423.271 126.053 386.967 126.053 350.303H214.331C214.331 375.374 219.268 400.198 228.862 423.361C238.456 446.523 252.518 467.568 270.246 485.295C287.972 503.023 309.018 517.085 332.18 526.679C355.341 536.274 380.167 541.211 405.237 541.211C430.307 541.211 455.132 536.274 478.293 526.679C501.455 517.085 522.501 503.023 540.228 485.295C557.955 467.568 572.017 446.523 581.611 423.361C591.205 400.198 596.143 375.374 596.143 350.303H684.42Z"},],
        }, 1)
        .add({
          targets: "#arcthree",
          translateY: "-6.8rem",
        }, 1)
  }, [])

  useEffect(() => {
    if (screenWidth <= 1060 && screenWidth > 1000) {
      setWidth(800);
      setHeight(1100);
    } else if (screenWidth <= 1000 && screenWidth > 790) {
      setWidth(850);
      setHeight(1050);
    } else if (screenWidth <= 790 && screenWidth > 720) {
      setWidth(800);
      setHeight(1000);
    } else if (screenWidth <= 720 && screenWidth > 650) {
      setWidth(750);
      setHeight(1000);
    } else if (screenWidth <= 650 && screenWidth >= 420) {
      setWidth(400);
      setHeight(700);
    } else if (screenWidth < 420 && screenWidth > 360) {
      setWidth(350);
      setHeight(650);
    } else if (screenWidth <= 360) {
      setWidth(330);
      setHeight(630);
    }
  }, [screenWidth]);

  useEffect(() => {
    if (screenWidth <= 600 && screenWidth > 540) {
      const difference = 600 - screenWidth;

      setIndentLeft(100 - difference);
    }
  }, [screenWidth]);

  return (
      <div
          className="animated-target"
          style={(screenWidth <= 650 && screenWidth > 540) ? {left: indentLeft} : {}}
      >
        <svg
            id="target"
            className="target-svg"
            width={width}
            height={height}
            viewBox="0 0 900 900"
            fill="none"
        >
          <path
              id="arctwo"
              d="M308.532 222.071C308.532 209.521 311.004 197.094 315.807 185.5C320.609 173.906 327.649 163.371 336.522 154.497C345.396 145.624 355.931 138.584 367.525 133.782C379.119 128.979 391.546 126.507 404.096 126.507C416.645 126.507 429.072 128.979 440.666 133.782C452.26 138.584 462.795 145.624 471.669 154.497C480.542 163.371 487.582 173.906 492.384 185.5C497.187 197.094 499.659 209.521 499.659 222.071H433.478C433.478 218.212 432.718 214.391 431.241 210.827C429.765 207.262 427.601 204.023 424.872 201.294C422.143 198.566 418.904 196.401 415.339 194.925C411.775 193.448 407.955 192.688 404.096 192.688C400.237 192.688 396.416 193.448 392.852 194.925C389.287 196.401 386.048 198.566 383.319 201.294C380.591 204.023 378.426 207.262 376.95 210.827C375.473 214.391 374.713 218.212 374.713 222.071H308.532Z"
              fill="#A8CCFC"
          />
          <path
              d="M800 238.908C800 291.437 789.654 343.451 769.552 391.981C749.45 440.511 719.986 484.607 682.842 521.75C645.699 558.894 601.604 588.358 553.073 608.46C504.543 628.562 452.529 638.908 400 638.908C347.471 638.908 295.457 628.562 246.927 608.46C198.396 588.358 154.301 558.894 117.158 521.75C80.0139 484.607 50.55 440.511 30.4482 391.981C10.3463 343.451 -6.88828e-06 291.437 0 238.908H85.5825C85.5825 280.197 93.7156 321.083 109.516 359.23C125.317 397.377 148.477 432.038 177.673 461.234C206.87 490.431 241.531 513.591 279.678 529.392C317.825 545.192 358.71 553.325 400 553.325C441.29 553.325 482.175 545.192 520.322 529.392C558.469 513.591 593.13 490.431 622.326 461.235C651.523 432.038 674.683 397.377 690.484 359.23C706.284 321.083 714.417 280.197 714.417 238.908H800Z"
              fill="#A8CCFC"
          />
          <path
              id="arcone"
              d="M182.025 221.615C182.025 192.512 187.769 163.694 198.929 136.807C210.09 109.919 226.446 85.4885 247.068 64.9097C267.689 44.3307 292.17 28.0066 319.113 16.8694C346.056 5.73224 374.932 -3.82161e-06 404.096 0C433.259 3.8216e-06 462.135 5.73226 489.079 16.8695C516.021 28.0067 540.502 44.3308 561.123 64.9097C581.745 85.4886 598.102 109.919 609.262 136.807C620.422 163.694 626.166 192.512 626.166 221.615H535.288C535.288 204.422 531.895 187.397 525.302 171.513C518.709 155.629 509.046 141.196 496.863 129.038C484.681 116.881 470.218 107.236 454.301 100.657C438.384 94.0778 421.324 90.6912 404.096 90.6912C386.867 90.6912 369.808 94.0778 353.89 100.657C337.973 107.236 323.51 116.881 311.328 129.038C299.145 141.196 289.482 155.629 282.889 171.513C276.296 187.397 272.903 204.422 272.903 221.615H182.025Z"
              fill="#A8CCFC"
          />
          <path
              d="M499.363 243.327C499.363 255.809 496.905 268.168 492.127 279.701C487.351 291.232 480.349 301.71 471.523 310.537C462.698 319.363 452.219 326.364 440.687 331.141C429.155 335.917 416.795 338.376 404.313 338.376C391.832 338.376 379.471 335.917 367.94 331.141C356.408 326.364 345.929 319.363 337.103 310.537C328.277 301.71 321.276 291.232 316.499 279.701C311.722 268.168 309.264 255.809 309.264 243.327H404.313H499.363Z"
              fill="#A8CCFC"
          />
          <path
              id="arcthree"
              d="M626.166 243.458C626.166 272.562 620.422 301.38 609.262 328.267C598.102 355.155 581.745 379.585 561.123 400.165C540.502 420.744 516.021 437.068 489.079 448.205C462.135 459.342 433.259 465.074 404.096 465.074C374.932 465.074 346.056 459.342 319.113 448.205C292.17 437.068 267.689 420.744 247.068 400.164C226.446 379.585 210.09 355.155 198.929 328.267C187.769 301.38 182.025 272.562 182.025 243.458H272.903C272.903 260.652 276.296 277.676 282.889 293.561C289.482 309.445 299.145 323.878 311.328 336.036C323.51 348.193 337.973 357.838 353.89 364.417C369.808 370.996 386.867 374.383 404.096 374.383C421.324 374.383 438.384 370.996 454.301 364.417C470.218 357.838 484.681 348.193 496.863 336.036C509.046 323.878 518.709 309.445 525.302 293.561C531.895 277.676 535.288 260.652 535.288 243.458H626.166Z"
              fill="#A8CCFC"
          />
        </svg>
      </div>
  )
}
export default AnimatedTarget;
